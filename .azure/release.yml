trigger:
  branches:
    exclude:
      - "*"
  tags:
    include:
      - "*"

jobs:
  - job: docker
    displayName: Docker image

    pool:
      vmImage: 'Ubuntu 16.04'

    steps:
      - task: Docker@2
        displayName: Login to ACR
        inputs:
          command: login
          containerRegistry: azr-crypho

      - task: Docker@2
        displayName: Build and Push
        inputs:
          command: buildAndPush
          repository: crypho/k8s-tools
          tags: |
            $(Build.SourceBranchName)
